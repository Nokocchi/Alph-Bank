openapi: 3.1.0
info:
  title: OpenAPI definition
  version: v0
servers:
- url: http://localhost:8080
  description: Generated server url
tags:
- name: CoreAccount
  description: Description
- name: CoreLoan
  description: Description
- name: CorePayment
  description: Description
- name: CoreCustomer
  description: Description
paths:
  /payment:
    post:
      tags:
      - CorePayment
      operationId: createPayment
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreatePaymentRequest"
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Payment"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
  /loan:
    post:
      tags:
      - CoreLoan
      operationId: createLoan
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateLoanRequest"
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Loan"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
  /customer:
    post:
      tags:
      - CoreCustomer
      operationId: createCustomer
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCustomerRequest"
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Customer"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
  /account:
    post:
      tags:
      - CoreAccount
      operationId: createAccount
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAccountRequest"
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Account"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
  /customer/{id}:
    get:
      tags:
      - CoreCustomer
      operationId: getCustomer
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Customer"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
    delete:
      tags:
      - CoreCustomer
      operationId: deleteCustomer
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "204":
          description: No Content
          content:
            application/json:
              schema:
                type: string
                format: uuid
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
    patch:
      tags:
      - CoreCustomer
      operationId: updateCustomer
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateCustomerRequest"
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Customer"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
  /payment/{id}:
    get:
      tags:
      - CorePayment
      operationId: getPayment
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Payment"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
    delete:
      tags:
      - CorePayment
      operationId: deletePayment
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "204":
          description: No Content
          content:
            application/json:
              schema:
                type: string
                format: uuid
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
  /payment/search:
    get:
      tags:
      - CorePayment
      operationId: searchPayments
      parameters:
      - name: from-account-id
        in: query
        required: true
        schema:
          type: string
          format: uuid
      - name: recipient-iban
        in: query
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentSearchRestResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
  /loan/{id}:
    get:
      tags:
      - CoreLoan
      operationId: getLoan
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Loan"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
    delete:
      tags:
      - CoreLoan
      operationId: deleteLoan
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "204":
          description: No Content
          content:
            application/json:
              schema:
                type: string
                format: uuid
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
  /loan/search:
    get:
      tags:
      - CoreLoan
      operationId: searchLoans
      parameters:
      - name: customerId
        in: query
        required: false
        schema:
          type: string
          format: uuid
      - name: accountId
        in: query
        required: false
        schema:
          type: string
          format: uuid
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SearchLoansResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
  /customer/search:
    get:
      tags:
      - CoreCustomer
      summary: Search all customers
      description: Returns a list of customers
      operationId: searchCustomers
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CustomerSearchResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
  /account/{id}:
    get:
      tags:
      - CoreAccount
      operationId: getAccount
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Account"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
    delete:
      tags:
      - CoreAccount
      operationId: deleteAccount
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "204":
          description: No Content
          content:
            application/json:
              schema:
                type: string
                format: uuid
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
  /account/search:
    get:
      tags:
      - CoreAccount
      operationId: searchAccounts
      parameters:
      - name: customer-id
        in: query
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountSearchResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: string
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
components:
  schemas:
    CreatePaymentRequest:
      type: object
      properties:
        fromCustomerId:
          type: string
          format: uuid
        fromAccountId:
          type: string
          format: uuid
        recipientIban:
          type: string
        amount:
          $ref: "#/components/schemas/MonetaryAmount"
        messageToSelf:
          type: string
        messageToRecipient:
          type: string
        scheduledDateTime:
          type: string
          format: date-time
    MonetaryAmount:
      type: object
      properties:
        amount:
          type: number
          example: 99.96
        currency:
          type: string
          example: USD
    Payment:
      type: object
      properties:
        paymentId:
          type: string
          format: uuid
        fromCustomerId:
          type: string
          format: uuid
        fromAccountId:
          type: string
          format: uuid
        amount:
          $ref: "#/components/schemas/MonetaryAmount"
        recipientIban:
          type: string
        recipientAccountId:
          type: string
          format: uuid
        messageToSelf:
          type: string
        messageToRecipient:
          type: string
        executedDateTime:
          type: string
          format: date-time
        scheduledDateTime:
          type: string
          format: date-time
    CreateLoanRequest:
      type: object
      properties:
        customerId:
          type: string
          format: uuid
        accountId:
          type: string
          format: uuid
        principal:
          $ref: "#/components/schemas/MonetaryAmount"
        fixedRateInterestAPR:
          type: number
        loanTermMonths:
          type: integer
          format: int32
    Loan:
      type: object
      properties:
        loanId:
          type: string
          format: uuid
        customerId:
          type: string
          format: uuid
        accountId:
          type: string
          format: uuid
        principal:
          $ref: "#/components/schemas/MonetaryAmount"
        fixedRateInterestAPR:
          type: number
        loanTermMonths:
          type: integer
          format: int32
        payoutDateTime:
          type: string
          format: date-time
    Address:
      type: object
      properties:
        streetAddress:
          type: string
        city:
          type: string
        country:
          type: string
    CreateCustomerRequest:
      type: object
      properties:
        locale:
          type: string
        nationalId:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        address:
          $ref: "#/components/schemas/Address"
    Customer:
      type: object
      properties:
        id:
          type: string
          format: uuid
        address:
          $ref: "#/components/schemas/Address"
        phoneNumber:
          type: string
        nationalId:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        locale:
          type: string
    CreateAccountRequest:
      type: object
      properties:
        customerId:
          type: string
          format: uuid
          example: 3fa85f64-5717-4562-b3fc-2c963f66afa6
        locale:
          type: string
          example: sv_SE
        accountName:
          type: string
          example: Savings account
      required:
      - customerId
      - locale
    Account:
      type: object
      properties:
        id:
          type: string
          format: uuid
        accountName:
          type: string
        balance:
          $ref: "#/components/schemas/MonetaryAmount"
        iban:
          type: string
    UpdateCustomerRequest:
      type: object
      properties:
        address:
          $ref: "#/components/schemas/Address"
        phoneNumber:
          type: string
        firstName:
          type: string
        lastName:
          type: string
    PaymentSearchRestResponse:
      type: object
      properties:
        payments:
          type: array
          items:
            $ref: "#/components/schemas/PaymentSearchResult"
    PaymentSearchResult:
      type: object
      properties:
        paymentId:
          type: string
          format: uuid
        fromCustomerId:
          type: string
          format: uuid
        fromAccountId:
          type: string
          format: uuid
        amount:
          $ref: "#/components/schemas/MonetaryAmount"
        recipientIban:
          type: string
        recipientAccountId:
          type: string
          format: uuid
        message:
          type: string
        visibleOnAccountDateTime:
          type: string
          format: date-time
    SearchLoansResponse:
      type: object
      properties:
        loans:
          type: array
          items:
            $ref: "#/components/schemas/Loan"
    CustomerSearchResponse:
      type: object
      properties:
        customers:
          type: array
          items:
            $ref: "#/components/schemas/Customer"
    AccountSearchResponse:
      type: object
      properties:
        accounts:
          type: array
          items:
            $ref: "#/components/schemas/Account"
